<% owner = current_user_owns?(minisymposium) %>  
<% presentations = minisymposium.presentations.all %>  

<% if defined?(one_line) and one_line %>  
  <div>
    <%= link_to minisymposium, minisymposium %> 
  </div>
<% else %>
  <div class="minisymposium_panel">

    <div class="panel-heading">
      <h3 class="panel-title">
        <%= link_to minisymposium, minisymposium %>
        <span class="badge pull-right">MS</span>
      </h3>
    </div><!-- heading -->

    <div class="panel-body">
      <p><em><%= minisymposium.description %></em></p>

      <dl class="dl-horizontal">
        <dt>Organizers:</dt>
        <% minisymposium.organizers.includes(:user).each do |organizer| %>  
          <dd>
            <%= show_user(organizer.user) %>
            <%= link_to_delete organizer_path(organizer) if owner %>  
          </dd>
        <% end %>
        <% if defined?(with_presentations) and with_presentations %>  
          <dt>Presentations:</dt>
          <% presentations.each do |presentation| %>
            <dd><%= link_to presentation, presentation %> </dd>
          <% end %>
          <% if (! minisymposium.accepted) and owner and presentations.size < 4 %>
            <%= content_tag(:dd, icon('warning') + ' Please add presentations.') %>  
          <% end %>
        <% end %>

        <% unless (minisymposium.accepted or defined?(short)) %>  
          <%= render(partial: 'ratings/dl_list', locals: { what: minisymposium }) %>  
        <% end %>
      </dl>
      <% if (! minisymposium.accepted) and owner and presentations.size < 4 %>  
        <p class="alert alert-warning">A minisymposium generally consists of <strong>four</strong> 25-minute presentations, with an additional five minutes for discussion after each presentation.</p>
      <% end %>
    </div><!-- body -->

    <% if ! defined?(short) %>  
      <div class="panel-footer footer-actions">
        <% if owner  %>  
          <%= link_to icon('pencil') + ' edit', edit_minisymposium_path(minisymposium) %>  
          <%= link_to icon('user')   + ' add organizer', new_minisymposium_organizer_path(minisymposium) %>  
          <% if presentations.size < 4 %>  
            <%= link_to icon('file-audio-o') + ' add presentation', new_minisymposium_presentation_path(minisymposium) %>  
          <% end %>
          <%= link_to icon('trash') + ' delete', minisymposium_path(minisymposium), method: :delete, title: 'delete', data: {confirm: 'Are you sure?'} %>
        <% end %>
        <% if user_in_scientific_commettee? %>  
          <%= link_to icon('star') + ' rate', new_minisymposium_rating_path(minisymposium), remote: true %>  
        <% end %>
        <% if user_in_organizer_commettee? %>  
          <%= link_to icon('clock-o') + ' schedule', new_conference_session_schedule_path(minisymposium) %>  
          <%= link_to icon('check') + ' accept', accept_minisymposium_path(minisymposium), method: :put %>  
        <% end %>
        <%= schedule(minisymposium) %>  
      </div><!-- footer -->
    <% end %>
  </div>
<% end %>
