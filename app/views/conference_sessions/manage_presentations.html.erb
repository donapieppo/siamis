<p class="alert alert-success">Current presentations in "<%= link_to @conference_session, @conference_session %>":</p>

<% if @actual_presentations.any? %>  
  <%= form_tag ordering_conference_session_path(@conference_session) do |f| %>  
    <% many = 1..@actual_presentations.count %>  
    <ul class="list-group">
      <% @actual_presentations.each do |presentation| %>  
        <li class="list-group-item">
          <% if user_in_organizer_committee? && ! @conference_session.is_a?(Minisymposium) %>  
            <%= link_to icon('trash'), remove_conference_session_presentation_path(@conference_session, presentation), method: :put, title: 'remove from session' %>
          <% end %>
          <%= select_tag "order[#{presentation.id}]", options_for_select(many, presentation.number) %>

          <%= link_to presentation, presentation %>  
          <% if user_in_organizer_committee? %>  
            - <small><%= show_role(presentation.speaker, no_affiliation: true) %></small>
          <% end %>
        </li>
      <% end %>
    </ul>
    <%= submit_tag 'Save order' %> - <%= link_to_back @conference_session %>  
  <% end %>
<% end %>

<% if user_in_organizer_committee? and @available_presentations.any? %>  
  <h2>Presentations to add:</h2>
  <ul class="list-group">
    <% @available_presentations.each do |presentation| %>  
      <li class="list-group-item">
        <%= link_to icon('plus-circle'), add_conference_session_presentation_path(@conference_session, presentation), method: :put, title: 'add to session' %> 
        <%= link_to presentation, presentation %> 
        <span class="pull-right">
          <%= show_role(presentation.speaker) %>
        </span>
      </li>
    <% end %>
  </ul>
<% end %>

<%= javascript_tag do %>  
  $(document).ready(function(){
    $("select").change(function() {
      $(this).parent("form").submit();
    })
  });
<% end %>
