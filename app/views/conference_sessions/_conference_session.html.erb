<% 
  owner         = current_user_owns?(conference_session)
  presentations = conference_session.presentations.includes(authors: :user).order(:number).all
  organizers    = conference_session.organizers.includes(:user).order('users.surname').all 
  missing_presentations = conference_session.is_a?(Minisymposium) and ((! conference_session.accepted) and owner and (presentations.size < 4))
%>  

<div class="conference_session_panel">
  <%= panel_heading(conference_session) %>  

  <div class="panel-body">
    <% unless defined?(condensed) and condensed %>  
      <p><em><%= conference_session.description %></em></p>
    <% end %>

    <dl class="dl-horizontal">
      <dt><%= conference_session.organizers_label %>:</dt>
      <% organizers.each do |organizer| %>  
        <dd>
        <%= show_role(organizer) %>
        <%= link_to_delete organizer_path(organizer) if (owner and organizer.user != current_user) %>  
        </dd>
      <% end %>
    </dl>

    <%= dl_presentations(presentations) %>  

    <% if conference_session.is_a?(Minisymposium) %>  
      <%= render(partial: 'ratings/dl_list', locals: { what: conference_session }) %>  
    <% end %>
  </div>

  <div class="panel-footer footer-actions">
    <%= panel_actions(conference_session) %>  
    <%= schedule(conference_session) %>  
  </div>
</div>
