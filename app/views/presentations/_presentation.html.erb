<% owner = current_user_owns?(presentation) %>  

<% if defined?(one_line) %>  
  <div>
    <%= link_to presentation, presentation %><br/>
    <%= users_list(presentation) %>  
    <span class="badge pull-right"><%= presentation.parent_event_abbr %></span>
  </div>
<% else %>
  <div class="presentation_panel">
    <div class="panel-heading">
      <h3>
        <%= link_to presentation, presentation %>
        <span class="badge pull-right"><%= presentation.parent_event_abbr %></span>
      </h3>
    </div><!-- heading -->

    <div class="panel-body">
      <p><em><%= presentation.abstract %></em></p>

      <% if ! defined?(short) and presentation.conference_session %>  
        <%= presentation_parent(presentation) %>  
      <% end %>

      <dl class="dl-horizontal">
        <dt>Authors:</dt>
        <% presentation.authors.each do |author| %>  
          <dd>
          <%= show_user(author.user) %> 
          <%= icon(:microphone) if presentation.authors.size == 1 or author.speak %>
          <%= link_to_delete author_path(author) if owner %>  
          </dd>
        <% end %>

        <%= render(partial: 'ratings/dl_list', locals: { what: presentation }) unless defined?(short) %>  
      </dl>
    </div><!-- body -->

    <% if ! defined?(short)%>  
      <div class="panel-footer footer-actions">
        <% if owner %>  
          <%= link_to icon('pencil') + " edit", edit_presentation_path(presentation) %>  
          <%= link_to icon('plus')   + " add author", new_presentation_author_path(presentation) %>
          <%= link_to icon('trash')  + " delete", presentation_path(presentation), method: :delete, title: 'delete', data: {confirm: 'Are you sure?'} %>
          <% if presentation.conference_session %>  
            <%= link_to icon('pencil') + " edit #{presentation.conference_session.class}", presentation.conference_session %>  
          <% end %>
        <% end %>
        <% if user_in_scientific_commettee? %>  
          <%= link_to icon('star') + ' rate', new_presentation_rating_path(presentation), remote: true %>  
        <% end %>
        <% if user_in_organizer_commettee? %>  
          <%= link_to icon('check') + ' accept', accept_presentation_path(presentation), method: :put %>  
        <% end %>
        <%= schedule(presentation) %>  
      </div><!-- footer -->
    <% end %>
  </div>
<% end %>
